<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Редактировать книгу</title>
</head>
<body>
<h2>Редактировать книгу</h2>

<form th:action="@{/book/{id}/edit(id=${bookRequest.id})}" th:object="${bookRequest}" method="post" style="width: 300px;">

  <div style="margin-bottom: 10px;">
    <label>Название:</label><br>
    <input type="text" th:field="*{title}" style="width: 100%; padding: 5px;">
    <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}" style="color: red;"></div>
  </div>

  <div style="margin-bottom: 10px;">
    <label>Автор:</label><br>
    <select th:field="*{authorId}" style="width: 100%; padding: 5px;">
      <option th:each="author : ${authors}"
              th:value="${author.id}"
              th:text="${author.fullName}"></option>
    </select>
    <div th:if="${#fields.hasErrors('authorId')}" th:errors="*{authorId}" style="color: red;"></div>
  </div>

  <div style="margin-bottom: 15px;">
    <label>Жанры:</label><br>
    <div style="border: 1px solid #ccc; padding: 10px; max-height: 150px; overflow-y: auto;">
      <div th:each="genre : ${genres}" style="margin-bottom: 5px;">
        <input type="checkbox"
               th:id="${'genre_' + genre.id}"
               th:field="*{genreIds}"
               th:value="${genre.id}">
        <label th:for="${'genre_' + genre.id}" th:text="${genre.name}"></label>
      </div>
    </div>
    <div th:if="${#fields.hasErrors('genreIds')}" th:errors="*{genreIds}" style="color: red;"></div>
  </div>

  <button type="submit">Сохранить изменения</button>
  <a th:href="@{/books}" style="text-decoration: none;">
    <button
        style="padding: 10px 15px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
      Список книг
    </button>
  </a>
</form>
</body>
</html>